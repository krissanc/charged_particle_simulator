# Charged Particle & Field Line Simulator

A real-time, physically-grounded visualization of charged particles and their electromagnetic fields in 3D space.

## Features

- **Physically Accurate**: Uses Coulomb's law and proper SI units
- **Interactive**: Click and drag particles to observe field line deformation
- **Real-time Field Lines**: Dynamically generated field lines with color encoding
- **Multi-Particle Support**: Simulate multiple charged particles simultaneously
- **Retarded Potentials**: Time-delayed field propagation (Phase 5)
- **Modern OpenGL**: Uses OpenGL 4.3+ with compute shader support

## Building

### Prerequisites

- CMake 3.21 or higher
- C++20 compatible compiler (GCC 10+, Clang 12+, MSVC 2019+)
- OpenGL 4.3+ compatible graphics card
- GLEW
- GLFW 3.x
- GLM

### Build Instructions

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

The executable will be in `build/ChargedParticleSim`.

### Dependencies

Dependencies should be located in `../dependencies/` relative to the project root:
- `dependencies/glad/` - OpenGL loader
- `dependencies/GLFW/` - Window and input handling
- `dependencies/glm/` - Math library

## Usage

### Controls

- **Left Mouse Drag**: Orbit camera around scene
- **Left Click + Drag on Particle**: Drag particle and observe field line updates
- **Scroll Wheel**: Zoom in/out
- **R Key**: Reset camera to default position
- **SPACE**: Pause/resume simulation
- **ESC**: Exit application

### Creating Particles

Particles can be created programmatically:

```cpp
// Create an electron
Particle electron = Particle::createElectron(glm::dvec3(-1.0, 0.0, 0.0));

// Create a proton
Particle proton = Particle::createProton(glm::dvec3(1.0, 0.0, 0.0));

// Create custom particle
Particle custom = Particle::createCustom(glm::dvec3(0.0, 0.0, 0.0), 1.602e-19, 9.109e-31);
```

## Architecture

The project follows a modular architecture:

```
engine/
├── core/          # Application core (logging, timing, constants)
├── math/           # Numerical integrators (RK4, Verlet, Euler)
├── physics/        # Physics simulation (particles, fields, field lines)
├── render/         # OpenGL rendering (particles, field lines)
├── interaction/    # User interaction (camera, picking, dragging)
└── scene/          # Scene management (particle system)
```

## Physics

### Electric Field Calculation

The electric field is computed using Coulomb's law:

```
E = k * q / r² * r̂
```

Where:
- `k = 8.99e9 N·m²/C²` (Coulomb constant)
- `q` = charge in coulombs
- `r` = distance from charge to evaluation point
- `r̂` = unit vector from charge to evaluation point

### Field Line Generation

Field lines are generated by:
1. Distributing seed points evenly on a sphere around each particle (Fibonacci sphere algorithm)
2. Numerically integrating along the field direction using RK4
3. Terminating when field magnitude is too weak, distance is too large, or line enters opposite charge

### Time Integration

Particle motion uses Velocity Verlet integration for stability:

```
v_new = v + a * dt
x_new = x + v * dt + 0.5 * a * dt²
```

## Configuration

Edit `.env` file (copy from `.env.example`) to configure:
- Log level
- Window dimensions
- Physics timestep
- Field line generation parameters

## Testing

Unit tests are available in `tests/`:

```bash
# Run Coulomb's law tests
./build/tests/test_coulomb
```

## Performance

- Field line generation is throttled to 10 Hz by default
- Field lines are cached and only regenerated when particles move significantly
- GPU acceleration for field line generation is planned (Phase 6)

## License

[Your License Here]

## Contributing

[Contributing Guidelines]

